version: 2

snapshots:
  - name: customers_snapshot
    description: >
      Tracks the historical changes (Type 2 Slowly Changing Dimension) for customer attributes. 
      This is used for time-based analysis of metrics like account balance and market segment.
    columns:
      - name: c_custkey
        description: The **Unique Key** used to identify the customer across all historical versions.
      - name: c_name
        description: The name of the customer. Changes to this column trigger a new snapshot record.
      - name: c_nationkey
        description: Foreign key identifying the customer's nation. Changes to this column trigger a new snapshot record.
      - name: c_acctbal
        description: The customer's current account balance. Changes to this column are tracked and trigger a new snapshot record.
      - name: c_mktsegment
        description: The customer's market segment. Changes to this column are tracked and trigger a new snapshot record.
      
      # dbt-added metadata columns
      - name: dbt_scd_id
        description: A unique surrogate key generated by dbt for each historical version of the customer record.
      - name: dbt_updated_at
        description: Timestamp when the source record was last observed to have changed, leading to the creation of this version.
      - name: dbt_valid_from
        description: Timestamp indicating when this customer version became active.
      - name: dbt_valid_to
        description: >
          Timestamp indicating when this customer version became invalid because a new version was recorded. 
          A NULL value means this is the currently active version.