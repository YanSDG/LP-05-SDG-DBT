version: 2

snapshots:
  - name: parts_snapshot
    description: >
      Tracks the historical changes (Type 2 Slowly Changing Dimension) for core part attributes. 
      This is primarily used to analyze and track changes to the part's retail price over time, 
      which is crucial for margin and sales reporting.
    columns:
      - name: p_partkey
        description: The **Unique Key** (Part ID) used to identify the part across all historical versions.
      - name: p_name
        description: The name of the part. Changes to this column trigger a new snapshot record.
      - name: p_mfgr
        description: The manufacturer of the part. Changes to this column trigger a new snapshot record.
      - name: p_brand
        description: The brand of the part. Changes to this column trigger a new snapshot record.
      - name: p_type
        description: The type of the part. Changes to this column trigger a new snapshot record.
      - name: p_size
        description: The size attribute of the part. Changes to this column trigger a new snapshot record.
      - name: p_container
        description: The container type for the part. Changes to this column trigger a new snapshot record.
      - name: p_retailprice
        description: >
          The retail price of the part. **This is a key column being tracked**; 
          any change to this value will create a new historical record.
      
      # dbt-added metadata columns
      - name: dbt_scd_id
        description: A unique surrogate key generated by dbt for each historical version of the part record.
      - name: dbt_updated_at
        description: Timestamp when the source record was last observed to have changed, leading to the creation of this version.
      - name: dbt_valid_from
        description: Timestamp indicating when this part version became active.
      - name: dbt_valid_to
        description: >
          Timestamp indicating when this part version became invalid because a new version was recorded. 
          A NULL value means this is the currently active version.