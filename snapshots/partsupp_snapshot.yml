version: 2

snapshots:
  - name: partsupp_snapshot
    description: >
      Tracks the historical changes (Type 2 Slowly Changing Dimension) for the 
      Part-Supplier relationship. This snapshot is critical for tracking 
      the supply cost and available quantity of a specific part from a specific supplier.
    columns:
      - name: ps_partkey
        description: Part of the **Composed Unique Key**. Identifies the part.
      - name: ps_suppkey
        description: Part of the **Composed Unique Key**. Identifies the supplier.
      - name: ps_availqty
        description: >
          The quantity of the part currently available from this supplier. 
          Changes to this column trigger a new snapshot record.
      - name: ps_supplycost
        description: >
          The unit cost of the part when purchased from this supplier. **This is a key 
          tracked column**; any change to the cost will create a new historical record.
      
      # dbt-added metadata columns
      - name: dbt_scd_id
        description: A unique surrogate key generated by dbt for each historical version of the Part-Supplier relationship record.
      - name: dbt_updated_at
        description: Timestamp when the source record was last observed to have changed.
      - name: dbt_valid_from
        description: Timestamp indicating when this Part-Supplier version became active.
      - name: dbt_valid_to
        description: >
          Timestamp indicating when this version became invalid (e.g., due to a change in cost or quantity). 
          A NULL value means this is the currently active version.